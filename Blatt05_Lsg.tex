\documentclass[a4paper,10pt]{article}
\usepackage[ngerman]{babel}		%dt. Übersetzung und Umlaute
\usepackage[utf8]{inputenc}		%Umlaute direkt eingeben
\usepackage{mathtools}			%Mathekrams
\usepackage{paralist}			%bessere Listen
\usepackage{amssymb}			%Mathesymbole
\usepackage{amsthm}			%typesetting theorems (Text über = u.ä.)
\usepackage{fancyhdr} 			%Headerstyles
\usepackage{verbatim}			%Sourcecode einfügen
\usepackage[margin=2.0cm,headheight=40pt,top=3cm]{geometry}
\usepackage{tikz}
\usepackage{tikz-qtree}
\usepackage{cancel}
\usepackage{stmaryrd}
\usepackage{colortbl}
\usetikzlibrary{matrix,positioning,arrows, automata}

\pagestyle{fancy}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
\lhead{\textbf{Blatt 04}}
\rhead{}
\cfoot{}
\rfoot{\thepage}
\begin{document}
	\parindent0pt
	\textbf{Aufgabe 01}
	\begin{compactenum} [(a)]
		\item $ \Gamma_1 = \{\{\lnot R,S\}, \{\lnot S, T\}, \{R,\lnot T\} \{R,S,T\},\{ \lnot R, \lnot S, \lnot T \} \} $ \\
		
		Resolutionswiderlegung:
		\begin{tabbing}
			\= \qquad \= \qquad\qquad\qquad \= \qquad\qquad \kill
			\>(1) \> $ \{\lnot R, S \} $ \> in $ \Gamma_1 $ \\
			\>(2) \> $ \{R, S, T\} $ \> in $ \Gamma_1 $ \\
			\>(3) \> $ \{S,T \} $ \> Resolution von (1) und (2) \\
			\>(4) \> $ \{\lnot S, T\} $ \> in $ \Gamma_1 $\\
			\>(5) \> $ \{T\} $ \> Resolution von (3) und (4) \\
			\>(6) \> $ \{R, \lnot T\} $ \> in $ \Gamma_1 $\\
			\>(7) \> $ \{R\} $ \> Resolution von (5) und (6) \\
			\>(8) \> $ \{S\} $ \> Resolution von (1) und (7) \\
			\>(9) \> $ \{\lnot R, \lnot S, \lnot T\} $ \> in $ \Gamma_1 $ \\
			\>(10) \> $ \{\lnot R, \lnot T\} $ \> Resolution von (8) und (9) \\
			\>(11) \> $ \{\lnot T\} $ \> Resolution von (7) und (10)\\
			\>(12) \> $ \ \varnothing $ \> Resolution von (5) und (11) 
		\end{tabbing}
		$ \Rightarrow \Gamma_1 $ ist unerfüllbar. \\
		
		\item TODO und keeen Bock drauf! \\
		
		\item Die Umkehrung gilt nicht! Gegenbeispiel: \\
		$ \Gamma := \{\{S,T\}, \{A,R\} \} $ und $ \delta:= 1 $ \\
		$ \Rightarrow \Gamma \models \delta $ aber $ \Gamma \nvdash_R \delta $
	\end{compactenum}
	\newpage
	\textbf{Aufgabe 02}
	\begin{tabbing}
			$ \Gamma = $ \= $ \{\{R,\lnot S,T\},\{U,W\},\{\lnot Q,\lnot R,S\},\{\lnot T,U\},\{R,\lnot U,\lnot W\},\{Q,R,S,T\}, $ \\
			\> $ \{Q,\lnot T\},\{\lnot Q, \lnot R,T\},\{\lnot R,\lnot S,\lnot T,\lnot U\},\{\lnot U,W\},\{U,\lnot W\},\{Q\}\} $
	\end{tabbing}
	\begin{compactenum} [(1)]
		\item Unit Propagation mit \{Q\} liefert die Klauselmenge \\
		\begin{tabbing}
			$ \Gamma' =$ \= $ \{\{R,\lnot S,T\},\{U,W\},\{\lnot R,S\},\{\lnot T,U\},\{R,\lnot U,\lnot W\},\cancel{\{Q,R,S,T\}},$ \\
		\> $\cancel{\{Q,\lnot T\}},\{\lnot R,T\},\{\lnot R,\lnot S,\lnot T,\lnot U\},\{\lnot U,W\},\{U,\lnot W\},\cancel{\{Q\}}\} $
		\end{tabbing} \
		
		\item Keine weitere Vereinfachung $ \Gamma' $ möglich. $ \Gamma' \neq \emptyset $. $ \emptyset \not\in \Gamma'.$ Wähle das Literal $ \lambda := R $ und wende den Algorithmus rekursiv auf $ \Gamma' \cup \{\{R\}\} $ an.\\
		
		\item Unit Propagation mit \{R\} liefert die Klauselmenge \\
		$ \cancel{\{\{R,\lnot S,T\}},\{U,W\},\{S\},\{\lnot T,U\},\cancel{\{R,\lnot U,\lnot W\}}, \{T\},\{\lnot S,\lnot T,\lnot U\},\{\lnot U,W\},\{U,\lnot W\}, \cancel{\{R\}} \} $ \\
		
		\item Unit Propagation mit \{S\} liefert die Klauselmenge \\
		$ \{\{U,W\},\cancel{\{S\}},\{\lnot T,U\}, \{T\},\{\lnot T,\lnot U\},\{\lnot U,W\},\{U,\lnot W\}\} $\\
		
		\item Unit Propagation mit \{T\} liefert die Klauselmenge \\
		$ \{\{U,W\},\{,U\}, \cancel{\{T\}},\{\lnot U\},\{\lnot U,W\},\{U,\lnot W\}\} $\\
		
		\item Unit Propagation mit \{U\} liefert die Klauselmenge \\
		$ \{\cancel{\{U,W\}},\cancel{\{,U\}}, \emptyset,\{W\},\cancel{\{U,\lnot W\}}\} $ \\
		Jetzt ist $ \emptyset $ in der Klauselmenge enthalten, d.h. die Klauselmenge ist nicht erfüllbar. Daher: \\
		
		\item Backtracking, zurück zu Schritt (2): \\
		Wende den Algorithmus auf $ \Gamma' \cup \{\{\lnot R\}\} $ an.\\
		
		\item Unit Propagation mit $\{\lnot R\}$ liefert die Klauselmenge \\
		$ \{\{\lnot S,T\},\{U,W\},\cancel{\{\lnot R,S\}},\{\lnot T,U\},\{\lnot U,\lnot W\}, \cancel{\{\lnot R,T\}},\cancel{\{\lnot R,\lnot S,\lnot T,\lnot U\}},\{\lnot U,W\},\{U,\lnot W\},\cancel{\{\lnot R \}}\} $\\
		
		\item Pure Literal Rule mit $ \lnot S $ liefert die Klauselmenge \\
		$ \cancel{\{\{\lnot S,T\}},\{U,W\},\{\lnot T,U\},\{\lnot U,\lnot W\}, \{\lnot U,W\},\{U,\lnot W\}\} $\\
		
		\item Pure Literal Rule mit $ \lnot T $ liefert die Klauselmenge \\
		$ \Gamma'' := \{\{U,W\},\cancel{\{\lnot T,U\}},\{\lnot U,\lnot W\}, \{\lnot U,W\},\{U,\lnot W\}\} $\\
		
		\item Keine weitere Vereinfachung $ \Gamma'' $ möglich. $ \Gamma'' \neq \emptyset $. $ \emptyset \not\in \Gamma''.$ Wähle das Literal $ \lambda := U $ und wende den Algorithmus rekursiv auf $ \Gamma' \cup \{\{U\}\} $ an.\\
		
		\item Unit Propagation mit \{U\} liefert die Klauselmenge \\
		$ \cancel{\{\{U,W\}},\{\lnot W\}, \{W\},\cancel{\{U,\lnot W\}},\cancel{\{U\}}\} $\\
		
		\item Unit Propagation mit \{W\} liefert die Klauselmenge \\
		$ \{ \emptyset, \cancel{\{W\}}\} $ \\
		Jetzt ist $ \emptyset $ in der Klauselmenge enthalten, d.h. die Klauselmenge ist nicht erfüllbar. Daher: \\
		
		\item Backtracking, zurück zu Schritt (11): \\
		Wende den Algorithmus auf $ \Gamma'' \cup \{\{\lnot U\}\} $ an.\\
		
		\item Unit Propagation mit $\{\lnot U\}$ liefert die Klauselmenge \\
		$ \{\{W\},\cancel{\{\lnot U,\lnot W\}}, \cancel{\{\lnot U,W\}},\{\lnot W\}\} $\\
		
		\item Unit Propagation mit $\{W\}$ liefert die Klauselmenge \\
		$ \{\cancel{\{W\}},\emptyset\} $ \\
		Jetzt ist $ \emptyset $ in der Klauselmenge enthalten, d.h. die Klauselmenge ist nicht erfüllbar. Da kein weiteres Backtracking mehr möglich ist, ist die Klauselmenge $ \Gamma $ unerfüllbar.
	\end{compactenum}

	\newpage
	\textbf{Aufgabe 03}
	\begin{compactenum} [(a)]
		\item \begin{tabbing}
			$ \varphi = $ \= $R \wedge (0 \rightarrow T) \wedge (1 \rightarrow (P\vee \lnot Q)) \wedge (S \rightarrow 0) \wedge ((R \wedge \lnot S \wedge T) \rightarrow \lnot W) \wedge (R \vee \lnot T) \stackrel{\text{elim. Implikationen}}{\equiv}$ \\
			\> $ R \wedge (1 \vee T) \wedge (0 \vee (P \vee \lnot Q)) \wedge (\lnot S \vee 0) \wedge (\lnot (R \wedge \lnot S \wedge T) \vee \lnot W) \wedge (R \vee \lnot T) \equiv $ \\
			\> $ R \wedge (P \vee \lnot Q) \wedge \lnot S \wedge (\lnot R \vee S \vee \lnot T \vee \lnot W) \wedge (R \vee \lnot T) $
		\end{tabbing} 
		Entspricht der Hornerklauselmenge: \\
		$ \Phi := \{\{R\}, \{P,\lnot Q\},\{\lnot S\},\{\lnot R, S, \lnot T,\lnot W\},\{R,\lnot T\}\} $ \\
		
		\item $ \Gamma = \{\{U\}, \{W\}, \{V,\lnot W\}, \{S,\lnot T\},\{U,\lnot V, \lnot W\},\{\lnot T,\lnot V\},\{S,\lnot U,\lnot V\},\{\lnot S,\lnot T\}\} $\\
		
		\underline{1. Schleifendurchlauf: }\\
		$ \emptyset \not\in \Gamma. $ Wähle \{U\} $ \in \Gamma $, streiche $ \lnot U $ aus allen Klauseln in $ \Gamma $, und streiche alle Klauseln, die $ U $ enthalten.\\
		$ \Gamma = \{\cancel{\{U\}}, \{W\}, \{V, \lnot W\}, \{S,\lnot T\},\cancel{\{U, \lnot V, \lnot W\}}, \{\lnot T\lnot V\},\{S,\lnot V\},\{\lnot S, \lnot T\}\} $\\
		
		\underline{2. Schleifendurchlauf: }\\
		$ \emptyset \not\in \Gamma. $ Wähle \{W\} $ \in \Gamma $, streiche $ \lnot W $ aus allen Klauseln in $ \Gamma $, und streiche alle Klauseln, die $ W $ enthalten.\\
		$ \Gamma = \{\cancel{\{W\}},\{V\},\{S,\lnot S\},\{\lnot T, \lnot V\},\{S,\lnot V\},\{\lnot S,\lnot T\}\} $\\
		
		\underline{3. Schleifendurchlauf: }\\
		$ \emptyset \not\in \Gamma. $ Wähle \{V\} $ \in \Gamma $, streiche $ \lnot V $ aus allen Klauseln in $ \Gamma $, und streiche alle Klauseln, die $ V $ enthalten.\\
		$ \Gamma = \{\cancel{\{V\}}, \{S, \lnot T\}, \{\lnot T\}, \{S\}, \{\lnot S, \lnot T\}\} $\\
		
		\underline{4. Schleifendurchlauf: }\\
		$ \emptyset \not\in \Gamma. $ Wähle \{S\} $ \in \Gamma $, streiche $ \lnot S $ aus allen Klauseln in $ \Gamma $, und streiche alle Klauseln, die $ S $ enthalten.\\
		$ \Gamma = \{\cancel{\{S,\lnot T\}}, \{\lnot T\}, \cancel{\{S\}}, \{\lnot T\}\} $\\
		
		\underline{5. Schleifendurchlauf: }\\
		$ \emptyset \not\in \Gamma. \Gamma $ enthällt keine Tatsachenklausel.\\
		D.h.: Halte mit Ausgabe 'erfüllbar'.\\
		
		\item \begin{compactenum} [(i)]
			\item $ \varphi := ((S\vee T\vee A \vee R)\wedge (W\vee A \vee R\vee S)) $ ist eine Formel in KNF und keine Hornformel, da in den disjunktiven Klauseln mehr als ein positives Literal vorkommt. Es gibt keine äquivalente Hornformel, da man durch Umformung von $ \varphi $ (mit z.B. De Morgan) zwar negative Literale erhalten kann, aber die resultierende Formel $ \varphi' $ nicht mehr in KNF ist. 
			\item Es gibt allerdings zu jede Formel $\varphi \in AL $ eine erfüllbarkeitsäquivalente Hornformel. Da Erfüllbarkeitsäquivalenz eine schwächere Eigenschaft gegenüber der Äquivalenz ist, lässt sich leicht eine Hornformel konstruieren, die mit der selben Interpretation erfüllt wie $ \varphi $.
		\end{compactenum}
		
		\item Obwohl $ \Gamma_1 $ aus Aufgabe 1a unerfüllbar ist, würde der Streichungsalgorithmus die Ausgabe: 'erfüllbar' liefern, da $ \Gamma_1 $ keine Tatsachenklausel enthält. Der Streichungsalgorithmus erwartet eine endliche Menge von Hornklauseln als Eingabe, $ \Gamma_1 $ ist allerdings keine solche Menge, da die Klausel $ \{R,S,T\} $ mehr als ein positives Literal besitzt. 
	\end{compactenum}\ \\

	\newpage
	\textbf{Aufgabe 04}
	\begin{compactenum} [(a)]
		\item \begin{compactenum} [(V 1)]
			\item 
			\begin{verbatim}
			% Version 1
			ziffer(0).
			ziffer(1).
			ziffer(2).
			ziffer(3).
			ziffer(4).
			ziffer(5).
			ziffer(6).
			ziffer(7).
			ziffer(8).
			ziffer(9).
			
			raetsel2(A, B, C, D, E, F, G, H) :-
				ziffer(A), ziffer(B), ziffer(D), ziffer(E),
				C is 10 * D + E - (10 * A + B), ziffer(C), C =\= 0,
				G is 2* C , ziffer(G),
				10*A+B - C =:= 10 * A + D,
				ziffer(F), ziffer(H),
				(100 * D + 10 * F + B) / G =:= 10 * H + D,
				(10 * A + B) ** 2 =:= 100 * D + 10 * F + B,
				(10 * D + E) + (10*A + D) =:= 10*H + D.
			\end{verbatim}
			\item 
			\begin{verbatim}
			% Version 2
			ziffer(0).
			ziffer(1).
			ziffer(2).
			ziffer(3).
			ziffer(4).
			ziffer(5).
			ziffer(6).
			ziffer(7).
			ziffer(8).
			ziffer(9).
			
			raetsel2(A, B, C, D, E, F, G, H) :-
				ziffer(A), ziffer(B), ziffer(C), ziffer(D),
				ziffer(E), ziffer(F), ziffer(G), ziffer(H),
				10 * A + B + C =:= 10 * D + E,
				(10 * A + B) ** 2 =:= 100 * D + 10 * F + B,
				2*C =:= G,
				10 * D + E + 10 * A + D =:= 10 * H + D,
				10 * A + B - C =:= 10 * A + D,
				G =\= 0,
				(100 * D + 10 * F + B)/ G =:=  10 * H + D.
			\end{verbatim}
		\end{compactenum}\
		\item 
		\begin{verbatim}
		
		\end{verbatim}
	\end{compactenum}

\end{document}
